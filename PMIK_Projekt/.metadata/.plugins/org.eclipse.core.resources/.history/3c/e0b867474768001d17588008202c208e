
#include "servo360.h"
#include "tim.h"

//speed_level from 55 to 355
//stop_speed_level = 205
#define Skala 4,66
#define Stala 575

void set_move(float distance, uint8_t direction )
{
	if(direction == 0 &&speed_level <101 && speed_level>=0){		// krecenie w lewo
		float servo_speed = Skala * distance + Stala ;
		__HAL_TIM_SET_COMPARE(&TIM_NO, TIM_CH_NO, servo_speed);
	}
	else if(direction == 1 && speed_level <101 && speed_level>=0){		// krecenie w prawo
			float servo_speed = PWM_STOP+(speed_level*STEP_SPEED);
				__HAL_TIM_SET_COMPARE(&TIM_NO, TIM_CH_NO, servo_speed);
			}
	else{
		return;
	}
	}
4,66*distance +575
void stop_servo()
{
	__HAL_TIM_SET_COMPARE(&TIM_NO, TIM_CH_NO, 1530);
}
